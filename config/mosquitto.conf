# mosquitto.conf - Simplified Configuration for MVP

# Basic listener configuration
listener 1883
protocol mqtt

# Allow anonymous connections (for MVP testing)
# WARNING: In production, use authentication with username/password
allow_anonymous true

# Connection limits
max_connections 100
max_queued_messages 1000

# Logging
log_dest file mosquitto.log
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information

# Persistence (save in-memory database to disk)
persistence true
persistence_location ./mosquitto_data/

# Message size limits
message_size_limit 10485760

# QoS settings
max_qos 2

# Client settings
max_keepalive 60

# ====================================================================
# TLS/SSL Configuration (COMMENTED OUT FOR MVP)
# Uncomment and configure these for production deployment
# ====================================================================

 listener 8883
 protocol mqtt

# Certificate authority file
 cafile certs/ca.crt

# Server certificate and key
 certfile certs/server.crt
 keyfile  certs/server.key

# Require client certificates for mutual TLS
 require_certificate true
 use_identity_as_username false

# TLS version (use TLS 1.2 or higher)
 tls_version tlsv1.2

# ====================================================================
# NOTES FOR PRODUCTION DEPLOYMENT
# ====================================================================
# 1. Generate certificates:
#    ./generate_certs.sh
#
# 2. Enable TLS listener (uncomment lines above)
#
# 3. Disable anonymous access:
#    allow_anonymous false
#    password_file /etc/mosquitto/passwd
#
# 4. Update client connection code to use port 8883 with TLS
#
# 5. Consider using ACLs for topic-level access control:
#    acl_file /etc/mosquitto/acl.conf
# ====================================================================